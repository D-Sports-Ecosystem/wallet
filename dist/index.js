"use strict";var t=require("ethers");class e{constructor(){this.events=new Map}on(t,e){this.events.has(t)||this.events.set(t,new Set),this.events.get(t).add(e)}off(t,e){const o=this.events.get(t);o&&(o.delete(e),0===o.size&&this.events.delete(t))}emit(t,e){const o=this.events.get(t);o&&o.forEach(t=>{try{t(e)}catch(t){console.error("Error in event listener:",t)}})}removeAllListeners(t){t?this.events.delete(t):this.events.clear()}}class o extends e{constructor(t,e){super(),this.connectors=new Map,this.config=t,this.adapter=e,this.state={isConnecting:!1,isReconnecting:!1,isDisconnected:!0},this.initialize()}async initialize(){const t=await this.adapter.storage.getItem("dsports-wallet-connector");if(t){this.state.isReconnecting=!0;try{await this.reconnect(t)}catch(t){console.warn("Failed to reconnect to previous wallet:",t)}this.state.isReconnecting=!1}}addConnector(t){this.connectors.set(t.id,t),t.on("connect",e=>{this.handleConnect(t,e)}),t.on("disconnect",()=>{this.handleDisconnect()}),t.on("change",t=>{this.handleChange(t)}),t.on("error",t=>{this.handleError(t)})}removeConnector(t){this.connectors.delete(t)}getConnectors(){return Array.from(this.connectors.values())}getConnector(t){return this.connectors.get(t)}async connect(t,e){const o=this.connectors.get(t);if(!o)throw new Error(`Connector ${t} not found`);this.state.isConnecting=!0,this.state.pendingConnector=t;try{const n=await o.connect(e);return this.currentConnector=o,await this.adapter.storage.setItem("dsports-wallet-connector",t),this.createAccount(n)}catch(t){throw this.state.isConnecting=!1,this.state.pendingConnector=void 0,t}}async disconnect(){this.currentConnector&&(await this.currentConnector.disconnect(),this.currentConnector=void 0),await this.adapter.storage.removeItem("dsports-wallet-connector"),this.handleDisconnect()}async switchChain(t){if(!this.currentConnector)throw new Error("No connector connected");await this.currentConnector.switchChain(t)}getState(){return{...this.state}}getAccount(){return this.state.account}isConnected(){return!!this.state.account?.isConnected}async reconnect(t){const e=this.connectors.get(t);if(e)try{if(await e.isAuthorized()){const o=await e.getAccount(),n=await e.getChainId();this.currentConnector=e,this.state.account={address:o,chainId:n,isConnected:!0,connector:t},this.state.isDisconnected=!1,this.emit("connect",this.state.account)}}catch(t){}}handleConnect(t,e){this.state.isConnecting=!1,this.state.pendingConnector=void 0,this.state.isDisconnected=!1,this.state.account=this.createAccount(e),this.emit("connect",this.state.account)}handleDisconnect(){this.state.account=void 0,this.state.isConnecting=!1,this.state.isReconnecting=!1,this.state.isDisconnected=!0,this.state.pendingConnector=void 0,this.state.error=void 0,this.emit("disconnect")}handleChange(t){t.account&&this.state.account&&(this.state.account.address=t.account,this.emit("accountsChanged",[t.account])),t.chain&&this.state.account&&(this.state.account.chainId=t.chain.id,this.emit("chainChanged",t.chain.id))}handleError(t){const e={name:t.name,message:t.message,code:"WALLET_ERROR",details:t};this.state.error=e,this.emit("error",e)}createAccount(t){return{address:t.account||"",chainId:t.chain?.id||1,isConnected:!0,connector:this.currentConnector?.id}}}class n extends e{constructor(t,e){super(),this.config=t,this.adapter=e}async login(t){this.emit("loginStart",{provider:t});try{let e;e="react-native"===this.adapter.platform?await this.loginReactNative(t):await this.loginWeb(t);const o=await this.generateWalletFromSocial(e),n={provider:t,user:e.user,token:e.token,expiresAt:e.expiresAt,walletAddress:o.address,privateKey:o.privateKey};return await this.storeLoginResult(n),this.emit("loginSuccess",n),n}catch(t){throw this.emit("loginError",t),t}}async loginWeb(t){const e=this.buildAuthUrl(t);return new Promise((t,o)=>{if(this.popup=window.open(e,"dsports-oauth","width=500,height=600,scrollbars=yes,resizable=yes")||void 0,!this.popup)return void o(new Error("Failed to open OAuth popup"));const n=e=>{e.origin===window.location.origin&&("OAUTH_SUCCESS"===e.data.type?(window.removeEventListener("message",n),this.popup?.close(),t(e.data.payload)):"OAUTH_ERROR"===e.data.type&&(window.removeEventListener("message",n),this.popup?.close(),o(new Error(e.data.error))))};window.addEventListener("message",n);const i=setInterval(()=>{this.popup?.closed&&(clearInterval(i),window.removeEventListener("message",n),o(new Error("OAuth popup was closed")))},1e3)})}async loginReactNative(t){this.buildAuthUrl(t);try{if("undefined"!=typeof window&&"function"==typeof window.open)return await this.loginWeb(t);throw new Error("React Native OAuth not fully implemented. Use web-based flow or implement native OAuth.")}catch(t){throw new Error(`React Native OAuth failed: ${t.message}`)}}buildAuthUrl(t){const e=this.config.providers[t];if(!e)throw new Error(`Provider ${t} not configured`);const o=this.config.redirectUri||`${window.location.origin}/auth/callback`,n=new URLSearchParams({client_id:e.clientId,redirect_uri:o,response_type:"code",scope:{google:"openid email profile",facebook:"email public_profile",twitter:"tweet.read users.read",discord:"identify email",github:"user:email",apple:"name email",email:"",sms:""}[t],state:this.generateState()});return`${{google:"https://accounts.google.com/oauth/v2/auth",facebook:"https://www.facebook.com/v18.0/dialog/oauth",twitter:"https://twitter.com/i/oauth2/authorize",discord:"https://discord.com/api/oauth2/authorize",github:"https://github.com/login/oauth/authorize",apple:"https://appleid.apple.com/auth/authorize",email:"",sms:""}[t]}?${n.toString()}`}generateState(){return Math.random().toString(36).substring(2,15)+Math.random().toString(36).substring(2,15)}async generateWalletFromSocial(e){const o=`${e.user.id}:${e.user.email}:${this.config.appSecret||"dsports-default-secret"}`,n=(new TextEncoder).encode(o),i=await this.adapter.crypto.sha256(n),r="0x"+Array.from(new Uint8Array(i)).map(t=>t.toString(16).padStart(2,"0")).join("");return{address:new t.ethers.Wallet(r).address,privateKey:r}}async logout(){try{await this.clearStoredData(),this.emit("logout")}catch(t){throw console.error("Logout failed:",t),t}}async getStoredUser(){const t=await this.adapter.storage.getItem("dsports-social-token"),e=await this.adapter.storage.getItem("dsports-social-user");if(!t||!e)return null;try{const o=JSON.parse(e);return{provider:o.provider,user:o.user,token:t,expiresAt:o.expiresAt,walletAddress:o.walletAddress,privateKey:o.privateKey}}catch{return null}}async getWalletFromSocial(e){if(e.privateKey)return new t.ethers.Wallet(e.privateKey);const o=await this.generateWalletFromSocial(e);return new t.ethers.Wallet(o.privateKey)}async storeLoginResult(t){await this.adapter.storage.setItem("dsports-social-token",t.token),await this.adapter.storage.setItem("dsports-social-user",JSON.stringify({provider:t.provider,user:t.user,expiresAt:t.expiresAt,walletAddress:t.walletAddress,privateKey:t.privateKey}))}async clearStoredData(){await this.adapter.storage.removeItem("dsports-social-token"),await this.adapter.storage.removeItem("dsports-social-user")}static handleOAuthCallback(t){const e=new URLSearchParams(t.split("?")[1]),o=e.get("code"),n=e.get("error"),i=e.get("state");n?window.parent.postMessage({type:"OAUTH_ERROR",error:n},window.location.origin):o&&window.parent.postMessage({type:"OAUTH_SUCCESS",payload:{code:o,state:i,user:{id:"mock-user-id",email:"user@example.com",name:"Mock User",avatar:"https://example.com/avatar.jpg"},token:"mock-access-token",expiresAt:Date.now()+36e5}},window.location.origin)}}class i{static getManagedCredentials(t){return{clientIds:this.MANAGED_CREDENTIALS,redirectUri:t.customDomain?`https://${t.customDomain}/auth/callback`:this.REDIRECT_URIS[t.environment]}}static isManagedCredentials(t){return Object.values(this.MANAGED_CREDENTIALS).includes(t)}static getQuickStartConfig(){const t=this.getManagedCredentials({environment:"development"});return{appSecret:"dsports-demo-secret-do-not-use-in-production",redirectUri:t.redirectUri,providers:{google:{clientId:t.clientIds.google},facebook:{clientId:t.clientIds.facebook},twitter:{clientId:t.clientIds.twitter},discord:{clientId:t.clientIds.discord},github:{clientId:t.clientIds.github}}}}static validateProductionConfig(t){const e=[],o=[];return"dsports-demo-secret-do-not-use-in-production"===t.appSecret&&o.push("Using demo app secret in production. Please set your own appSecret."),Object.entries(t.providers||{}).forEach(([t,o])=>{this.isManagedCredentials(o.clientId)&&e.push(`Using D-Sports managed ${t} credentials. Consider setting up your own OAuth app for production.`)}),t.redirectUri&&t.redirectUri.includes("d-sports.com")&&e.push("Using D-Sports managed redirect URI. Consider setting up your own domain for production."),{isValid:0===o.length,warnings:e,errors:o}}}function r(){return console.log("üöÄ Using D-Sports managed OAuth credentials for quick start!"),console.log("üìù For production, set up your own OAuth apps: https://docs.d-sports.com/oauth-setup"),i.getQuickStartConfig()}function a(t,e="development"){if("production"===e){const e=i.validateProductionConfig(t);if(!e.isValid)throw console.error("‚ùå Production configuration errors:"),e.errors.forEach(t=>console.error(`  - ${t}`)),new Error("Invalid production configuration");e.warnings.length>0&&(console.warn("‚ö†Ô∏è  Production configuration warnings:"),e.warnings.forEach(t=>console.warn(`  - ${t}`)))}return t}i.MANAGED_CREDENTIALS={google:"123456789-abcdefghijklmnopqrstuvwxyz.apps.googleusercontent.com",facebook:"1234567890123456",twitter:"your-twitter-oauth-client-id",discord:"your-discord-oauth-client-id",github:"your-github-oauth-client-id"},i.REDIRECT_URIS={development:"https://auth.d-sports.com/dev/callback",staging:"https://auth.d-sports.com/staging/callback",production:"https://auth.d-sports.com/callback"};class s{constructor(t){this.id="dsports-wallet",this.name="D-Sports Wallet",this.ready=!0,this.icon="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDgiIGhlaWdodD0iNDgiIHZpZXdCb3g9IjAgMCA0OCA0OCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHJlY3Qgd2lkdGg9IjQ4IiBoZWlnaHQ9IjQ4IiByeD0iMTIiIGZpbGw9IiM2MzY2RjEiLz4KPHBhdGggZD0iTTI0IDEySDM2VjM2SDI0VjEyWiIgZmlsbD0iI0Y5RkJGRiIvPgo8cGF0aCBkPSJNMTIgMTJIMjRWMjRIMTJWMTJaIiBmaWxsPSIjRjlGQkZGIi8+CjxwYXRoIGQ9Ik0xMiAyNEgyNFYzNkgxMlYyNFoiIGZpbGw9IiNGOUZCRkYiLz4KPC9zdmc+",this.isConnected=!1,this.eventEmitter=new e,this.config=t,this.customSocialLoginProvider=t.customSocialLoginProvider}on(t,e){this.eventEmitter.on(t,e)}off(t,e){this.eventEmitter.off(t,e)}async connect(t){try{if(t?.socialLogin&&this.customSocialLoginProvider)return await this.connectWithSocialLogin();const e=localStorage.getItem("dsports-wallet-account"),o=localStorage.getItem("dsports-wallet-chainId");if(e&&o){this.account=e,this.chainId=parseInt(o),this.isConnected=!0;const t={account:this.account,chain:{id:this.chainId},provider:this.provider};return this.eventEmitter.emit("connect",t),t}this.account=this.generateMockAddress(),this.chainId=t?.chainId||this.config.chains[0]?.id||1,this.isConnected=!0,localStorage.setItem("dsports-wallet-account",this.account),localStorage.setItem("dsports-wallet-chainId",this.chainId.toString());const n={account:this.account,chain:{id:this.chainId},provider:this.provider};return this.eventEmitter.emit("connect",n),n}catch(t){throw this.eventEmitter.emit("error",t),t}}async disconnect(){try{this.account=void 0,this.chainId=void 0,this.isConnected=!1,this.provider=void 0,localStorage.removeItem("dsports-wallet-account"),localStorage.removeItem("dsports-wallet-chainId"),this.eventEmitter.emit("disconnect")}catch(t){throw this.eventEmitter.emit("error",t),t}}async getAccount(){if(!this.account)throw new Error("No account connected");return this.account}async getChainId(){if(!this.chainId)throw new Error("No chain connected");return this.chainId}async getProvider(){return this.provider||(this.provider={request:async t=>{switch(t.method){case"eth_requestAccounts":return[this.account];case"eth_accounts":return this.account?[this.account]:[];case"eth_chainId":return`0x${this.chainId?.toString(16)}`;case"personal_sign":return`0x${"0".repeat(130)}`;default:throw new Error(`Method ${t.method} not supported`)}},on:(t,e)=>{this.on(t,e)},removeListener:(t,e)=>{this.off(t,e)}}),this.provider}async getSigner(){const t=await this.getProvider();return{getAddress:()=>this.getAccount(),signMessage:e=>t.request({method:"personal_sign",params:[e,this.account]}),signTransaction:t=>Promise.resolve(`0x${"0".repeat(130)}`)}}async isAuthorized(){return!!localStorage.getItem("dsports-wallet-account")}async switchChain(t){if(!this.config.chains.find(e=>e.id===t))throw new Error(`Chain ${t} not configured`);this.chainId=t,localStorage.setItem("dsports-wallet-chainId",t.toString()),this.eventEmitter.emit("change",{account:this.account,chain:{id:t},provider:this.provider})}async connectWithSocialLogin(){if(!this.customSocialLoginProvider)throw new Error("Custom social login provider not configured");let t=await this.customSocialLoginProvider.getStoredUser();if(!t||t.expiresAt<Date.now()){const e=await this.promptSocialProvider();t=await this.customSocialLoginProvider.login(e)}this.account=t.walletAddress||this.generateAddressFromSocialLogin(t),this.chainId=this.config.chains[0]?.id||1,this.isConnected=!0,localStorage.setItem("dsports-wallet-account",this.account),localStorage.setItem("dsports-wallet-chainId",this.chainId.toString());const e={account:this.account,chain:{id:this.chainId},provider:this.provider};return this.eventEmitter.emit("connect",e),e}async promptSocialProvider(){return"google"}generateAddressFromSocialLogin(t){const e=`${t.provider}-${t.user.id}`;let o=0;for(let t=0;t<e.length;t++){o=(o<<5)-o+e.charCodeAt(t),o&=o}return`0x${Math.abs(o).toString(16).padStart(8,"0")}${"0".repeat(32)}`}generateMockAddress(){const t=new Uint8Array(20);return crypto.getRandomValues(t),"0x"+Array.from(t).map(t=>t.toString(16).padStart(2,"0")).join("")}}function c(t){return()=>({id:"dsports-wallet",name:"D-Sports Wallet",iconUrl:"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDgiIGhlaWdodD0iNDgiIHZpZXdCb3g9IjAgMCA0OCA0OCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHJlY3Qgd2lkdGg9IjQ4IiBoZWlnaHQ9IjQ4IiByeD0iMTIiIGZpbGw9IiM2MzY2RjEiLz4KPHBhdGggZD0iTTI0IDEySDM2VjM2SDI0VjEyWiIgZmlsbD0iI0Y5RkJGRiIvPgo8cGF0aCBkPSJNMTIgMTJIMjRWMjRIMTJWMTJaIiBmaWxsPSIjRjlGQkZGIi8+CjxwYXRoIGQ9Ik0xMiAyNEgyNFYzNkgxMlYyNFoiIGZpbGw9IiNGOUZCRkYiLz4KPC9zdmc+",iconBackground:"#6366F1",createConnector:()=>({connector:new s(t),mobile:{getUri:async()=>"dsports://wallet/connect"}})})}class d{constructor(t){this.id="dsports-wallet",this.name="D-Sports Wallet",this.ready=!0,this.icon="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDgiIGhlaWdodD0iNDgiIHZpZXdCb3g9IjAgMCA0OCA0OCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHJlY3Qgd2lkdGg9IjQ4IiBoZWlnaHQ9IjQ4IiByeD0iMTIiIGZpbGw9IiM2MzY2RjEiLz4KPHBhdGggZD0iTTI0IDEySDM2VjM2SDI0VjEyWiIgZmlsbD0iI0Y5RkJGRiIvPgo8cGF0aCBkPSJNMTIgMTJIMjRWMjRIMTJWMTJaIiBmaWxsPSIjRjlGQkZGIi8+CjxwYXRoIGQ9Ik0xMiAyNEgyNFYzNkgxMlYyNFoiIGZpbGw9IiNGOUZCRkYiLz4KPC9zdmc+",this.isConnected=!1,this.eventEmitter=new e,this.config=t,this.customSocialLoginProvider=t.customSocialLoginProvider}on(t,e){this.eventEmitter.on(t,e)}off(t,e){this.eventEmitter.off(t,e)}async connect(t){try{if(t?.socialLogin&&this.customSocialLoginProvider)return await this.connectWithSocialLogin();const e=localStorage.getItem("dsports-wagmi-account"),o=localStorage.getItem("dsports-wagmi-chainId");if(e&&o){this.account=e,this.chainId=parseInt(o),this.isConnected=!0;const t={account:this.account,chain:{id:this.chainId},provider:this.provider};return this.eventEmitter.emit("connect",t),t}this.account=this.generateMockAddress(),this.chainId=t?.chainId||this.config.chains[0]?.id||1,this.isConnected=!0,localStorage.setItem("dsports-wagmi-account",this.account),localStorage.setItem("dsports-wagmi-chainId",this.chainId.toString());const n={account:this.account,chain:{id:this.chainId},provider:this.provider};return this.eventEmitter.emit("connect",n),n}catch(t){throw this.eventEmitter.emit("error",t),t}}async disconnect(){try{this.account=void 0,this.chainId=void 0,this.isConnected=!1,this.provider=void 0,localStorage.removeItem("dsports-wagmi-account"),localStorage.removeItem("dsports-wagmi-chainId"),this.eventEmitter.emit("disconnect")}catch(t){throw this.eventEmitter.emit("error",t),t}}async getAccount(){if(!this.account)throw new Error("No account connected");return this.account}async getChainId(){if(!this.chainId)throw new Error("No chain connected");return this.chainId}async getProvider(){return this.provider||(this.provider={request:async t=>{switch(t.method){case"eth_requestAccounts":return[this.account];case"eth_accounts":return this.account?[this.account]:[];case"eth_chainId":return`0x${this.chainId?.toString(16)}`;case"eth_getBalance":return"0x1bc16d674ec80000";case"eth_sendTransaction":return`0x${"0".repeat(64)}`;case"personal_sign":case"eth_signTypedData_v4":return`0x${"0".repeat(130)}`;default:throw new Error(`Method ${t.method} not supported`)}},on:(t,e)=>{this.on(t,e)},removeListener:(t,e)=>{this.off(t,e)},isConnected:()=>this.isConnected,getNetwork:()=>({chainId:this.chainId}),getSigner:()=>this.getSigner()}),this.provider}async getSigner(){const t=await this.getProvider();return{getAddress:()=>this.getAccount(),getChainId:()=>this.getChainId(),signMessage:e=>t.request({method:"personal_sign",params:[e,this.account]}),signTransaction:t=>Promise.resolve(`0x${"0".repeat(130)}`),sendTransaction:t=>Promise.resolve({hash:`0x${"0".repeat(64)}`,wait:()=>Promise.resolve({blockHash:`0x${"0".repeat(64)}`,blockNumber:12345,transactionHash:`0x${"0".repeat(64)}`,status:1})})}}async isAuthorized(){return!!localStorage.getItem("dsports-wagmi-account")}async switchChain(t){if(!this.config.chains.find(e=>e.id===t))throw new Error(`Chain ${t} not configured`);this.chainId=t,localStorage.setItem("dsports-wagmi-chainId",t.toString()),this.eventEmitter.emit("change",{account:this.account,chain:{id:t},provider:this.provider})}async connectWithSocialLogin(){if(!this.customSocialLoginProvider)throw new Error("Custom social login provider not configured");let t=await this.customSocialLoginProvider.getStoredUser();if(!t||t.expiresAt<Date.now()){const e=await this.promptSocialProvider();t=await this.customSocialLoginProvider.login(e)}this.account=t.walletAddress||this.generateAddressFromSocialLogin(t),this.chainId=this.config.chains[0]?.id||1,this.isConnected=!0,localStorage.setItem("dsports-wagmi-account",this.account),localStorage.setItem("dsports-wagmi-chainId",this.chainId.toString());const e={account:this.account,chain:{id:this.chainId},provider:this.provider};return this.eventEmitter.emit("connect",e),e}async promptSocialProvider(){return"google"}generateAddressFromSocialLogin(t){const e=`${t.provider}-${t.user.id}-wagmi`;let o=0;for(let t=0;t<e.length;t++){o=(o<<5)-o+e.charCodeAt(t),o&=o}return`0x${Math.abs(o).toString(16).padStart(8,"0")}${"0".repeat(32)}`}generateMockAddress(){const t=new Uint8Array(20);return crypto.getRandomValues(t),"0x"+Array.from(t).map(t=>t.toString(16).padStart(2,"0")).join("")}}function h(t){return new d(t)}function l(t){return()=>({id:"dsports-wallet",name:"D-Sports Wallet",type:"dsports-wallet",icon:"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDgiIGhlaWdodD0iNDgiIHZpZXdCb3g9IjAgMCA0OCA0OCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHJlY3Qgd2lkdGg9IjQ4IiBoZWlnaHQ9IjQ4IiByeD0iMTIiIGZpbGw9IiM2MzY2RjEiLz4KPHBhdGggZD0iTTI0IDEySDM2VjM2SDI0VjEyWiIgZmlsbD0iI0Y5RkJGRiIvPgo8cGF0aCBkPSJNMTIgMTJIMjRWMjRIMTJWMTJaIiBmaWxsPSIjRjlGQkZGIi8+CjxwYXRoIGQ9Ik0xMiAyNEgyNFYzNkgxMlYyNFoiIGZpbGw9IiNGOUZCRkYiLz4KPC9zdmc+",connect:async e=>{const o=new d(t),n=await o.connect(e);return{accounts:[n.account],chainId:n.chain?.id||1}},disconnect:async()=>{},getAccounts:async()=>{const e=new d(t);return[await e.getAccount()]},getChainId:async()=>{const e=new d(t);return await e.getChainId()},getProvider:async()=>{const e=new d(t);return await e.getProvider()},isAuthorized:async()=>{const e=new d(t);return await e.isAuthorized()},switchChain:async e=>{const o=new d(t);return await o.switchChain(e),{id:e,name:t.chains.find(t=>t.id===e)?.name||"Unknown",network:t.chains.find(t=>t.id===e)?.network||"unknown",nativeCurrency:t.chains.find(t=>t.id===e)?.nativeCurrency||{name:"Ether",symbol:"ETH",decimals:18},rpcUrls:t.chains.find(t=>t.id===e)?.rpcUrls||{default:{http:["https://rpc.example.com"]},public:{http:["https://rpc.example.com"]}}}},onAccountsChanged:t=>{},onChainChanged:t=>{},onConnect:t=>{},onDisconnect:()=>{}})}const p={platform:"web",storage:{getItem:async t=>{try{return localStorage.getItem(t)}catch{return null}},setItem:async(t,e)=>{try{localStorage.setItem(t,e)}catch{}},removeItem:async t=>{try{localStorage.removeItem(t)}catch{}}},crypto:{generateRandomBytes:t=>{const e=new Uint8Array(t);return crypto.getRandomValues(e),e},sha256:async t=>{const e=await crypto.subtle.digest("SHA-256",t);return new Uint8Array(e)}},network:{fetch:async(t,e)=>fetch(t,e)}},u={platform:"nextjs",storage:{getItem:async t=>{try{return"undefined"!=typeof window?localStorage.getItem(t):null}catch{return null}},setItem:async(t,e)=>{try{"undefined"!=typeof window&&localStorage.setItem(t,e)}catch{}},removeItem:async t=>{try{"undefined"!=typeof window&&localStorage.removeItem(t)}catch{}}},crypto:{generateRandomBytes:t=>{const e=new Uint8Array(t);if("undefined"!=typeof window&&window.crypto)crypto.getRandomValues(e);else for(let o=0;o<t;o++)e[o]=Math.floor(256*Math.random());return e},sha256:async t=>{if("undefined"!=typeof window&&window.crypto&&window.crypto.subtle){const e=await crypto.subtle.digest("SHA-256",t);return new Uint8Array(e)}{const e=require("crypto").createHash("sha256");return e.update(t),new Uint8Array(e.digest())}}},network:{fetch:async(t,e)=>{if("undefined"!=typeof window)return fetch(t,e);{const{default:o}=await Promise.resolve().then(function(){return S});return o(t,e)}}}},g={platform:"react-native",storage:{getItem:async t=>{try{const e=require("@react-native-async-storage/async-storage").default;return await e.getItem(t)}catch{return null}},setItem:async(t,e)=>{try{const o=require("@react-native-async-storage/async-storage").default;await o.setItem(t,e)}catch{}},removeItem:async t=>{try{const e=require("@react-native-async-storage/async-storage").default;await e.removeItem(t)}catch{}}},crypto:{generateRandomBytes:t=>{const e=new Uint8Array(t);try{const o=require("crypto").randomBytes(t);for(let n=0;n<t;n++)e[n]=o[n]}catch{for(let o=0;o<t;o++)e[o]=Math.floor(256*Math.random())}return e},sha256:async t=>{try{const e=require("crypto").createHash("sha256");return e.update(t),new Uint8Array(e.digest())}catch{throw new Error("SHA-256 not available in this environment")}}},network:{fetch:async(t,e)=>fetch(t,e)}};function m(){return"undefined"!=typeof window?void 0!==window.next||"undefined"!=typeof process?u:p:"undefined"!=typeof navigator&&"ReactNative"===navigator.product?g:u}function w(t){const e=m(),i={appName:t.metadata?.name||"D-Sports App",appUrl:t.metadata?.url,appIcon:t.metadata?.icons?.[0],appDescription:t.metadata?.description,projectId:t.projectId,chains:t.chains,socialLogin:t.socialLogin,theme:t.theme},r=new o(i,e);if(t.socialLogin){const o=t.environment?a(t.socialLogin,t.environment):t.socialLogin,c=new n(o,e),h=new s({chains:t.chains,projectId:t.projectId,appName:i.appName,appIcon:i.appIcon,appDescription:i.appDescription,appUrl:i.appUrl,socialLogin:o,customSocialLoginProvider:c}),l=new d({chains:t.chains,projectId:t.projectId,metadata:t.metadata,socialLogin:o,customSocialLoginProvider:c});r.addConnector(h),r.addConnector(l)}else{const e=new s({chains:t.chains,projectId:t.projectId,appName:i.appName,appIcon:i.appIcon,appDescription:i.appDescription,appUrl:i.appUrl}),o=new d({chains:t.chains,projectId:t.projectId,metadata:t.metadata});r.addConnector(e),r.addConnector(o)}return r}var I="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function v(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var y={exports:{}};!function(t,e){var o=function(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if(void 0!==I)return I;throw new Error("unable to locate global object")}();t.exports=e=o.fetch,o.fetch&&(e.default=o.fetch.bind(o)),e.Headers=o.Headers,e.Request=o.Request,e.Response=o.Response}(y,y.exports);var f=v(y.exports),S=Object.freeze({__proto__:null,default:f});exports.CustomSocialLoginProvider=n,exports.DSportsOAuthService=i,exports.DSportsRainbowKitConnector=s,exports.DSportsWagmiConnector=d,exports.DSportsWallet=o,exports.EventEmitter=e,exports.createDSportsRainbowKitConnector=c,exports.createDSportsRainbowKitConnectorUniversal=function(t){const e=m(),o=t.socialLogin?new n(t.socialLogin,e):void 0;return c({...t,customSocialLoginProvider:o})},exports.createDSportsWagmiConnector=h,exports.createDSportsWagmiConnectorUniversal=function(t){const e=m(),o=t.socialLogin?new n(t.socialLogin,e):void 0;return h({...t,customSocialLoginProvider:o})},exports.createDSportsWallet=w,exports.createDSportsWalletQuickStart=function(t){return console.log("üöÄ Creating D-Sports wallet with quick start OAuth!"),console.log("üìù This uses D-Sports managed credentials - perfect for development."),console.log("üîß For production, use createDSportsWallet() with your own OAuth apps."),w({...t,socialLogin:r(),environment:"development"})},exports.createQuickStartSocialLogin=r,exports.dsportsWagmiConnector=l,exports.dsportsWagmiConnectorUniversal=function(t){const e=m(),o=t.socialLogin?new n(t.socialLogin,e):void 0;return l({...t,customSocialLoginProvider:o})},exports.getDefaultPlatformAdapter=m,exports.goerli={id:5,name:"Goerli",network:"goerli",nativeCurrency:{name:"Goerli Ether",symbol:"ETH",decimals:18},rpcUrls:{default:{http:["https://eth-goerli.g.alchemy.com/v2/demo"]},public:{http:["https://eth-goerli.g.alchemy.com/v2/demo"]}},blockExplorers:{default:{name:"Etherscan",url:"https://goerli.etherscan.io"}},testnet:!0},exports.mainnet={id:1,name:"Ethereum",network:"homestead",nativeCurrency:{name:"Ether",symbol:"ETH",decimals:18},rpcUrls:{default:{http:["https://eth-mainnet.g.alchemy.com/v2/demo"]},public:{http:["https://eth-mainnet.g.alchemy.com/v2/demo"]}},blockExplorers:{default:{name:"Etherscan",url:"https://etherscan.io"}}},exports.nextjsPlatformAdapter=u,exports.polygon={id:137,name:"Polygon",network:"matic",nativeCurrency:{name:"MATIC",symbol:"MATIC",decimals:18},rpcUrls:{default:{http:["https://polygon-rpc.com"]},public:{http:["https://polygon-rpc.com"]}},blockExplorers:{default:{name:"PolygonScan",url:"https://polygonscan.com"}}},exports.reactNativePlatformAdapter=g,exports.validateSocialLoginConfig=a,exports.version="1.0.0",exports.webPlatformAdapter=p;
//# sourceMappingURL=index.js.map
